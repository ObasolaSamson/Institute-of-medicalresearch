<div class="p-6 bg-white rounded-lg shadow-md">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold text-gray-700">Users List</h2>
    <div class="flex space-x-4">
      <button
        routerLink="/roles"
        class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"
      >
        View Roles
      </button>
      <button
        (click)="openCreateUserModal()"
        class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"
      >
        + Create User
      </button>
    </div>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-100">
          <th class="border p-3 text-left">Name</th>
          <th class="border p-3 text-left">Email</th>
          <th class="border p-3 text-left">Role</th>
          <th class="border p-3 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users" class="hover:bg-gray-50">
          <td class="border p-3">{{ user.firstName }} {{ user.lastName }}</td>
          <td class="border p-3">{{ user.email }}</td>
          <td class="border p-3">{{ user.role }}</td>
          <td class="border p-3 text-center">
            <button
              class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 mr-2"
              (click)="editUser(user)"
            >
              Edit
            </button>
            <button
              class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
              (click)="deleteUser(user.id)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Create User Modal -->
<div
  *ngIf="showCreateUserModal"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"
>
  <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
    <!-- Modal Header -->
    <div class="flex justify-between items-center p-4 border-b">
      <h3 class="text-xl font-semibold text-gray-800">Create New User</h3>
      <button
        class="text-gray-500 hover:text-gray-700"
        (click)="closeCreateUserModal()"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="p-6">
      <form [formGroup]="userForm" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- First Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >First Name</label
            >
            <input
              type="text"
              formControlName="firstName"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Last Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Last Name</label
            >
            <input
              type="text"
              formControlName="lastName"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Middle Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Middle Name</label
            >
            <input
              type="text"
              formControlName="middleName"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Email</label
            >
            <input
              type="email"
              formControlName="email"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Date of Birth -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Date of Birth</label
            >
            <input
              type="date"
              formControlName="dateOfBirth"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Gender -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Gender</label
            >
            <select
              formControlName="gender"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            >
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- marital status -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Marital Status</label
            >
            <select
              formControlName="maritalStatus"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            >
              <option value="">Select Marital Status</option>
              <option value="female">Single</option>
              <option value="other">Married</option>
            </select>
          </div>

          <!-- Phone number -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Phone number</label
            >
            <input
              type="text"
              formControlName="phoneNumber"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
          </div>

          <!-- Role Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Role Name</label
            >
            <select
              formControlName="roleName"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            >
              <option value="">Select Role</option>
              <option *ngFor="let role of roles" [value]="role.roleName">
                {{ role.roleName }}
              </option>
            </select>
          </div>

          <!-- Create Password -->
          <div class="relative">
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Create Password</label
            >
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
            <button
              type="button"
              (click)="togglePasswordVisibility()"
              class="absolute right-2 top-8 text-sm text-green-500 hover:text-green-700"
            >
              {{ showPassword ? "Hide" : "Show" }}
            </button>
          </div>

          <!-- Confirm Password -->
          <div class="relative">
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >Confirm Password</label
            >
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmPassword"
              class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"
            />
            <button
              type="button"
              (click)="toggleConfirmPasswordVisibility()"
              class="absolute right-2 top-8 text-sm text-green-500 hover:text-green-700"
            >
              {{ showConfirmPassword ? "Hide" : "Show" }}
            </button>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-end space-x-3 mt-6">
          <button
            type="button"
            class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"
            (click)="closeCreateUserModal()"
          >
            Cancel
          </button>
          <button
            (click)="onSubmit()"
            type="submit"
            class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"
          >
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
